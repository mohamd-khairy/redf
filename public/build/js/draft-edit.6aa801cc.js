(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["draft-edit"],{"8e14":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex-grow-1"},[i("v-card",{attrs:{loading:e.loading}},[i("v-card-text",{staticClass:"p-3 roles"},[i("v-form",[i("div",{staticClass:"title mb-2"},[e._v(" "+e._s(e.$t("reports.editPinned"))+" ")]),i("v-row",[i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-text-field",{attrs:{label:e.$t("reports.title"),rules:[e.rules.required]},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-select",{staticClass:" mx-1",attrs:{items:e.dateStatuses,variant:"underlined",label:e.$t("reports.dateStatus"),"item-text":"key","item-value":"value"},model:{value:e.form.global_date,callback:function(t){e.$set(e.form,"global_date",t)},expression:"form.global_date"}})],1),1===e.form.global_date?i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-select",{staticClass:" mx-1",attrs:{label:"Select",items:e.time_types,variant:"underlined",label:e.$t("reports.timeType"),"item-text":"value","item-value":"key","hide-details":""},model:{value:e.form.time_type,callback:function(t){e.$set(e.form,"time_type",t)},expression:"form.time_type"}})],1):e._e(),"dynamic"===e.form.time_type&&1===e.form.global_date?i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-select",{staticClass:" mx-1",attrs:{label:"Select",items:e.dates,variant:"underlined",label:e.$t("reports.date"),"item-text":"value","item-value":"key","hide-details":""},model:{value:e.form.time_range,callback:function(t){e.$set(e.form,"time_range",t)},expression:"form.time_range"}})],1):e._e(),"specific"===e.form.time_type&&1===e.form.global_date?i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[i("v-text-field",e._g({attrs:{label:e.$t("reports.selectFromDate"),"prepend-icon":"mdi mdi-calendar",readonly:""},model:{value:e.form.start,callback:function(t){e.$set(e.form,"start",t)},expression:"form.start"}},s))]}}],null,!1,2382430074),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[i("v-date-picker",{on:{input:function(t){e.menu=!1}},model:{value:e.form.start,callback:function(t){e.$set(e.form,"start",t)},expression:"form.start"}})],1)],1):e._e(),"specific"===e.form.time_type&&1===e.form.global_date?i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[i("v-text-field",e._g({attrs:{label:e.$t("reports.selectToDate"),"prepend-icon":"mdi mdi-calendar",readonly:""},model:{value:e.form.end,callback:function(t){e.$set(e.form,"end",t)},expression:"form.end"}},s))]}}],null,!1,4256781432),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[i("v-date-picker",{on:{input:function(t){e.menu2=!1}},model:{value:e.form.end,callback:function(t){e.$set(e.form,"end",t)},expression:"form.end"}})],1)],1):e._e()],1),i("div",{staticClass:"d-flex mt-10"},[i("v-btn",{attrs:{loading:e.loading,disabled:e.loading,color:"primary"},on:{click:function(t){return e.updatePinned()}}},[e._v(" "+e._s(e.$t("reports.edit"))+" ")])],1)],1)],1)],1)],1)},r=[],a=i("5530"),o=i("2f62"),n=i("d7c2"),l={name:"EditPin",data:function(){return{dateStatuses:[{key:this.$t("reports.mixed"),value:0},{key:this.$t("reports.global"),value:1}],form:{title:"",start:"",end:"",time_type:"",time_range:"",global_date:""},errors:{},errorMessages:"",loading:!1,menu:!1,menu2:!1,fromDate:"",toDate:"",breadcrumbs:[{text:this.$t("reports.reports"),disabled:!0},{text:this.$t("reports.pinnedReports"),href:"/reports/pinned"},{text:this.$t("reports.editPinned")}],rules:{required:function(e){return e&&Boolean(e)||"Required"}}}},watch:{},computed:Object(a["a"])(Object(a["a"])({},Object(o["e"])("reports",["pin","time_types"])),{},{dates:function(){return this.$store.state.reports.time_types[1].dates}}),mounted:function(){this.open()},created:function(){var e=this,t=this.$route.params.id;this.setBreadCrumb({breadcrumbs:this.breadcrumbs,pageTitle:this.$t("reports.editPinnedReports")}),this.loading=!0,this.getOnePinned(t).then((function(){var t;e.loading=!1;var i=null!==(t=e.pin)&&void 0!==t?t:{},s=i.id,r=i.title,a=i.start,o=i.end,n=i.time_type,l=i.time_range,c=i.global_date;e.form={id:s,title:r,start:a,end:o,time_type:n,time_range:l,global_date:c}})).catch((function(){e.loading=!1}))},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(o["b"])("reports",["getOnePinned","editPinned","getBuilderOptions"])),Object(o["b"])("app",["setBreadCrumb"])),{},{open:function(){var e=this;this.isLoading=!0,this.getBuilderOptions().then((function(){e.isLoading=!1})).catch((function(){e.isLoading=!1}))},updatePinned:function(){var e=this;this.isLoading=!0;var t=this.$route.params.id,i={id:t,title:this.form.title,global_date:this.form.global_date,time_type:this.form.time_type,time_range:this.form.time_range,start:this.form.start,end:this.form.end};this.editPinned(i).then((function(t){e.isLoading=!1,Object(n["b"])("success",t.data.message),e.$router.push({name:"reports-pinned"})})).catch((function(){e.isLoading=!1}))}})},c=l,d=i("2877"),m=i("6544"),p=i.n(m),u=i("8336"),f=i("b0afa"),v=i("99d9"),b=i("62ad"),h=i("2e4b"),_=i("4bd4"),y=i("e449"),g=i("0fd9"),x=i("b974"),$=i("8654"),k=Object(d["a"])(c,s,r,!1,null,"3902c183",null);t["default"]=k.exports;p()(k,{VBtn:u["a"],VCard:f["a"],VCardText:v["d"],VCol:b["a"],VDatePicker:h["a"],VForm:_["a"],VMenu:y["a"],VRow:g["a"],VSelect:x["a"],VTextField:$["a"]})},afdd:function(e,t,i){"use strict";var s=i("8336");i.d(t,"a",(function(){return s["a"]})),t["b"]=s["a"]},f403:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex-grow-1"},[i("v-card",{attrs:{loading:e.loading}},[i("v-card-text",{staticClass:"p-3 roles"},[i("v-form",[i("div",{staticClass:"title mb-2"},[e._v(" "+e._s(e.$t("reports.editDraftReport"))+" ")]),i("v-row",[i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-text-field",{attrs:{label:e.$t("reports.title"),rules:[e.rules.required]},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-select",{staticClass:" mx-1",attrs:{items:e.models,rules:[e.rules.required],variant:"underlined",label:e.$t("reports.model"),"item-text":"value","item-value":"key"},model:{value:e.form.model_type,callback:function(t){e.$set(e.form,"model_type",t)},expression:"form.model_type"}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-select",{staticClass:" mx-1",attrs:{label:"Select",items:e.report_types,variant:"underlined",label:e.$t("reports.reportType"),"item-text":"value","item-value":"key","hide-details":""},model:{value:e.form.report_list,callback:function(t){e.$set(e.form,"report_list",t)},expression:"form.report_list"}})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-select",{staticClass:" mx-1",attrs:{label:"Select",items:e.show_types,variant:"underlined",label:e.$t("reports.showType"),"item-text":"value","item-value":"key","hide-details":""},model:{value:e.form.report_type,callback:function(t){e.$set(e.form,"report_type",t)},expression:"form.report_type"}})],1),"specific"===e.form.report_type?i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-select",{staticClass:" mx-1",attrs:{label:"Select",items:e.locations,rules:[e.rules.required],variant:"underlined",label:e.$t("reports.specificLocation"),"item-text":"name","item-value":"id"},model:{value:e.selectedSpecificLocation,callback:function(t){e.selectedSpecificLocation=t},expression:"selectedSpecificLocation"}})],1):e._e(),"comparison"===e.form.report_type?i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-select",{staticClass:" mx-1",attrs:{label:"Select",items:e.locations,rules:[e.rules.required],variant:"underlined",label:e.$t("reports.locationComparisons"),"item-text":"name","item-value":"id","return-object":"",multiple:""},model:{value:e.form.sites,callback:function(t){e.$set(e.form,"sites",t)},expression:"form.sites"}})],1):e._e(),"types"===e.form.report_list&&"specific"===e.form.report_type?i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-select",{staticClass:" mx-1",attrs:{label:"Select",items:e.eventTypes,variant:"underlined",label:e.$t("reports.specificType"),"item-text":"key","item-value":"value","hide-details":"","return-object":""},model:{value:e.selectedSpecificType,callback:function(t){e.selectedSpecificType=t},expression:"selectedSpecificType"}})],1):e._e(),"types"===e.form.report_list&&"comparison"===e.form.report_type?i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-select",{staticClass:" mx-1",attrs:{label:"Select",items:e.eventTypes,variant:"underlined",label:e.$t("reports.typeComparisons"),"item-text":"key","item-value":"value","hide-details":"","return-object":"",multiple:""},model:{value:e.form.types,callback:function(t){e.$set(e.form,"types",t)},expression:"form.types"}})],1):e._e(),i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-select",{staticClass:" mx-1",attrs:{label:"Select",items:e.time_types,variant:"underlined",label:e.$t("reports.timeType"),"item-text":"value","item-value":"key","hide-details":""},model:{value:e.form.time_type,callback:function(t){e.$set(e.form,"time_type",t)},expression:"form.time_type"}})],1),"dynamic"===e.form.time_type?i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-select",{staticClass:" mx-1",attrs:{label:"Select",items:e.dates,variant:"underlined",label:e.$t("reports.date"),"item-text":"value","item-value":"key","hide-details":""},model:{value:e.form.time_range,callback:function(t){e.$set(e.form,"time_range",t)},expression:"form.time_range"}})],1):e._e(),"specific"===e.form.time_type?i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[i("v-text-field",e._g({attrs:{label:e.$t("reports.selectFromDate"),"prepend-icon":"mdi mdi-calendar",readonly:""},model:{value:e.form.start,callback:function(t){e.$set(e.form,"start",t)},expression:"form.start"}},s))]}}],null,!1,2382430074),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[i("v-date-picker",{on:{input:function(t){e.menu=!1}},model:{value:e.form.start,callback:function(t){e.$set(e.form,"start",t)},expression:"form.start"}})],1)],1):e._e(),"specific"===e.form.time_type?i("v-col",{attrs:{cols:"12",md:"6"}},[i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[i("v-text-field",e._g({attrs:{label:e.$t("reports.selectToDate"),"prepend-icon":"mdi mdi-calendar",readonly:""},model:{value:e.form.end,callback:function(t){e.$set(e.form,"end",t)},expression:"form.end"}},s))]}}],null,!1,4256781432),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[i("v-date-picker",{on:{input:function(t){e.menu2=!1}},model:{value:e.form.end,callback:function(t){e.$set(e.form,"end",t)},expression:"form.end"}})],1)],1):e._e()],1),i("div",{staticClass:"d-flex mt-10"},[i("v-btn",{attrs:{loading:e.loading,disabled:e.loading,color:"primary"},on:{click:function(t){return e.updateDraft()}}},[e._v(" "+e._s(e.$t("reports.edit"))+" ")])],1)],1)],1)],1)],1)},r=[],a=(i("4160"),i("159b"),i("5530")),o=i("2f62"),n=i("d7c2"),l={name:"EditDraft",data:function(){return{form:{title:"",start:"",end:"",time_type:"",report_type:"",time_range:"",model_type:"",report_list:"",sites:[],types:[]},errors:{},errorMessages:"",loading:!1,menu:!1,menu2:!1,selectedTime:{},selectedSpecificLocation:"",selectedSpecificType:{},selectedDate:"",fromDate:"",toDate:"",breadcrumbs:[{text:this.$t("reports.reports"),disabled:!0},{text:this.$t("reports.draftedReports"),href:"/reports/drafted"},{text:this.$t("reports.editDraft")}],rules:{required:function(e){return e&&Boolean(e)||"Required"}}}},watch:{},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(o["e"])("reports",["draft","models","report_types","show_types","time_types"])),Object(o["e"])("locations",["locations"])),Object(o["e"])("events",["eventTypes"])),{},{dates:function(){return this.$store.state.reports.time_types[1].dates}}),mounted:function(){this.open(),this.fetchLocations(),this.fetchTypes()},created:function(){var e=this,t=this.$route.params.id;this.setBreadCrumb({breadcrumbs:this.breadcrumbs,pageTitle:this.$t("reports.editDraftReport")}),this.loading=!0,this.getOneDraft(t).then((function(){var t;e.loading=!1;var i=null!==(t=e.draft)&&void 0!==t?t:{},s=i.id,r=i.title,a=i.start,o=i.end,n=i.time_type,l=i.report_type,c=i.time_range,d=i.model_type,m=i.report_list,p=(i.columns,i.site_id),u=i.sites,f=i.types;e.form={id:s,title:r,start:a,end:o,time_type:n,report_type:l,time_range:c,model_type:d,report_list:m,sites:u,types:f},"specific"===e.form.report_type&&(e.selectedSpecificLocation=p[0],e.selectedSpecificType=f[0])})).catch((function(){e.loading=!1}))},methods:Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(o["b"])("reports",["getOneDraft","editDraft","getBuilderOptions"])),Object(o["b"])("locations",["getLocations"])),Object(o["b"])("events",["getTypes"])),Object(o["b"])("app",["setBreadCrumb"])),{},{open:function(){var e=this;this.isLoading=!0,this.getBuilderOptions().then((function(){e.isLoading=!1})).catch((function(){e.isLoading=!1}))},fetchLocations:function(){var e=this;this.isLoading=!0,this.getLocations().then((function(){e.isLoading=!1})).catch((function(){e.isLoading=!1}))},fetchTypes:function(){var e=this;this.isLoading=!0,this.getTypes().then((function(){e.isLoading=!1})).catch((function(){e.isLoading=!1}))},selectTimeType:function(){"dynamic"===this.selectedTime.key&&(this.dates=this.selectedTime.dates)},updateDraft:function(){var e=this;this.isLoading=!0;var t=this.$route.params.id,i=[],s=[];"comparison"===this.form.report_type&&this.form.sites&&this.form.sites.forEach((function(e){i.push(e.id)})),"specific"===this.form.report_type&&this.selectedSpecificLocation&&i.push(this.selectedSpecificLocation),"comparison"===this.form.report_type&&this.form.types&&this.form.types.forEach((function(e){s.push(e.key)})),"specific"===this.form.report_type&&"{}"!=JSON.stringify(this.selectedSpecificType)&&s.push(this.selectedSpecificType.key);var r={id:t,title:this.form.title,model_type:this.form.model_type,report_list:this.form.report_list,type:this.form.report_type,time_type:this.form.time_type,time_range:this.form.time_range,start:this.form.start,end:this.form.end,site_ids:i,types:s};console.log("data--\x3e",r),this.editDraft(r).then((function(t){e.isLoading=!1,Object(n["b"])("success",t.data.message),e.$router.push({name:"reports-drafted"})})).catch((function(){e.isLoading=!1}))}})},c=l,d=i("2877"),m=i("6544"),p=i.n(m),u=i("8336"),f=i("b0afa"),v=i("99d9"),b=i("62ad"),h=i("2e4b"),_=i("4bd4"),y=i("e449"),g=i("0fd9"),x=i("b974"),$=i("8654"),k=Object(d["a"])(c,s,r,!1,null,"f5cd0e44",null);t["default"]=k.exports;p()(k,{VBtn:u["a"],VCard:f["a"],VCardText:v["d"],VCol:b["a"],VDatePicker:h["a"],VForm:_["a"],VMenu:y["a"],VRow:g["a"],VSelect:x["a"],VTextField:$["a"]})}}]);